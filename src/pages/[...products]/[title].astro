---
import { data } from "../../data/data";
import Layout from "../../layouts/Layout.astro";
import DetailsLayout from "../../layouts/DetailsLayout.astro";
import DetailsPils from "../../components/DetailsPils.astro";
import Detailstext from "../../components/Detailstext.astro";
import Button from "../../components/Button.astro";

const { title } = Astro.params;

const info = data.find((b) => b.title === title);

if (!info) {
  return Astro.redirect("/404");
}

export const prerender = true;

export function getStaticPaths() {
  const paths = data.flatMap((product) => {
    return [{ params: { products: "products/", title: product.title } }];
  });
  return paths;
}

const benefit = info.benefits;
---

<Layout title={`${title} 💪🏻`}>
  <DetailsLayout
    transitiontext={info.transitionname}
    title={info.title}
    bgstart={info.bgstart}
    textcolor={info.textcolor}
  >
    <DetailsPils
      transitionname={info.pilsData.transitionname}
      principal={info.pilsData.principal}
      pils1={info.pilsData.pils1}
      pils2={info.pilsData.pils2}
      transitionpils1={info.pilsData.transitionpils1}
      transitionpils2={info.pilsData.transitionpils2}
    />
    <Detailstext
      href={info.title}
      title={info.detailstitle}
      description={info.description}
      howworks={info.howworks}
      howuse={info.howuse}
    />
    <section class="text-center text-white mt-72 sm:mt-0">
      <button class="text-white px-4 py-2 bg-[#2B9D6D] rounded-lg">
        Agregar al carrito
      </button>
    </section>
  </DetailsLayout>
  <section
    class={`bg-gradient-to-t ${info.bgstart} to-black text-white flex flex-col justify-center items-center py-10`}
  >
    <span>Galeria de imagenes {info.title}</span>
    <div
      class="grid grid-cols-12 [&>img]:object-cover [&>img]:p-2 [&>img]:w-full [&>img]:h-96 [&>img]:rounded-2xl"
    >
      <img src="/images/testoplus/testo2.jpeg" class="col-span-5" />
      <section class="w-full col-span-7 h-96 p-2 rounded-2xl text-white">
        <ul>
          {
            Object.keys(benefit).map((key) => (
              <li class="text-white">{benefit[key]}</li>
            ))
          }
        </ul>
      </section>
      <section class="w-full col-span-5 h-96 p-2 rounded-2xl"></section>
      <img
        src="/images/testoplus/testo5.jpeg"
        class="col-span-7 obrject-cover"
      />
    </div>
  </section>
</Layout>
